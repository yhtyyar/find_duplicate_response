"""Модуль отображения результатов в консоли."""


def print_results(total: int, duplicates_count: int, duplicates: dict, stats: dict) -> None:
    """
    Вывод результатов обработки, включая дубликаты.
    
    Аргументы:
        total: Общее количество обработанных строк
        duplicates_count: Количество найденных дубликатов
        duplicates: Словарь с дублирующимися записями
        stats: Словарь со статистикой
    """
    # Цвета для светлого фона для лучшей читаемости
    сброс = '\033[0m'
    общий_цвет = '\033[92m' if duplicates_count == 0 else '\033[91m'  # Зеленый или красный

    # Светлые цвета для дубликатов (мягкие оттенки для светлого фона)
    цвета = [
        '\033[94m',   # Светло-синий
        '\033[92m',   # Светло-зеленый
        '\033[93m',   # Светло-желтый
        '\033[95m',   # Светло-пурпурный
        '\033[96m',   # Светло-голубой
        '\033[91m',   # Светло-красный
        '\033[90m',   # Темно-серый (все еще видим на светлом фоне)
        '\033[37m'    # Белый
    ]
    
    # Специальные цвета для кодов ошибок
    ошибка_4xx_цвет = '\033[91m'  # Светло-красный для ошибок 4xx
    ошибка_5xx_цвет = '\033[95m'  # Светло-пурпурный для ошибок 5xx

    print(f"\n{общий_цвет}Статистика обработки:{сброс}")
    print(f"Обработано строк: {total}")
    print(f"Найдено дубликатов: {duplicates_count}")

    if duplicates:
        print(f"\n{общий_цвет}Дублирующиеся строки:{сброс}")
        print(f"{'Код ответа':<15} | {'Время начала':<25} | {'Метод':<7} | {'URL':<150} |")

        группы = list(duplicates.keys())
        for индекс_группы, ключ in enumerate(группы):
            цвет = цвета[индекс_группы % len(цвета)]
            for строка in duplicates[ключ]:
                # Применяем специальную раскраску для кодов ошибок
                код = строка['Response Code']
                if код.startswith('4') or код.startswith('5'):
                    if код.startswith('4'):
                        цвет = ошибка_4xx_цвет
                    elif код.startswith('5'):
                        цвет = ошибка_5xx_цвет
                
                # Применяем цвет к строке
                print(f"{цвет}"
                      f"{строка['Response Code']:<15} | "
                      f"{строка['Request Start Time'][:25]:<25} | "
                      f"{строка['Method']:<7} | "
                      f"{строка['URL']:<150} | "
                      f"{сброс}")


def print_no_duplicates() -> None:
    """Вывод сообщения о том, что дубликаты не найдены."""
    print("\033[92mДубликаты не найдены\033[0m")